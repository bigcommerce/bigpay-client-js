{"version":3,"sources":["../../../src/payment/mappers/map-to-payment.js"],"names":["mapToPayment","data","order","payment","paymentMethod","quoteMeta","payload","device_info","request","deviceSessionId","gateway","notify_url","callbackUrl","return_url","returnUrl","nonce","credit_card_token","token","credit_card"],"mappings":";;;;;kBAUwBA,Y;;AAVxB;;;;AACA;;AACA;;AACA;;;;;;AAEA;;;;;AAKe,SAASA,YAAT,CAAsBC,IAAtB,EAA4B;AAAA,sBACkCA,IADlC,CAC/BC,KAD+B;AAAA,QAC/BA,KAD+B,+BACvB,EADuB;AAAA,wBACkCD,IADlC,CACnBE,OADmB;AAAA,QACnBA,OADmB,iCACT,EADS;AAAA,8BACkCF,IADlC,CACLG,aADK;AAAA,QACLA,aADK,uCACW,EADX;AAAA,0BACkCH,IADlC,CACeI,SADf;AAAA,QACeA,SADf,mCAC2B,EAD3B;;;AAGvC,QAAMC,UAAU;AACZC,qBAAaF,UAAUG,OAAV,GAAoBH,UAAUG,OAAV,CAAkBC,eAAtC,GAAwD,IADzD;AAEZC,iBAAS,4BAAQN,aAAR,CAFG;AAGZO,oBAAYT,MAAMU,WAHN;AAIZC,oBAAYT,cAAcU,SAAd,KAA4BZ,MAAMC,OAAN,GAAgBD,MAAMC,OAAN,CAAcW,SAA9B,GAA0C,IAAtE;AAJA,KAAhB;;AAOA,QAAMC,QAAQZ,QAAQY,KAAR,IAAiBX,cAAcW,KAA7C;;AAEA,QAAIA,KAAJ,EAAW;AACP,oCAAaT,OAAb,EAAsB;AAClBU,+BAAmB;AACfC,uBAAOF;AADQ;AADD,SAAtB;AAKH,KAND,MAMO;AACH,oCAAaT,OAAb,EAAsB;AAClBY,yBAAa,+BAAgBjB,IAAhB;AADK,SAAtB;AAGH;;AAED,WAAO,oBAAQK,OAAR,CAAP;AACH","file":"map-to-payment.js","sourcesContent":["import objectAssign from 'object-assign';\nimport { omitNil } from '../../common/utils';\nimport { mapToId } from '../../payment-method';\nimport mapToCreditCard from './map-to-credit-card';\n\n/**\n * Map to payment\n * @param {PaymentRequestData} data\n * @returns {Object}\n */\nexport default function mapToPayment(data) {\n    const { order = {}, payment = {}, paymentMethod = {}, quoteMeta = {} } = data;\n\n    const payload = {\n        device_info: quoteMeta.request ? quoteMeta.request.deviceSessionId : null,\n        gateway: mapToId(paymentMethod),\n        notify_url: order.callbackUrl,\n        return_url: paymentMethod.returnUrl || (order.payment ? order.payment.returnUrl : null),\n    };\n\n    const nonce = payment.nonce || paymentMethod.nonce;\n\n    if (nonce) {\n        objectAssign(payload, {\n            credit_card_token: {\n                token: nonce,\n            },\n        });\n    } else {\n        objectAssign(payload, {\n            credit_card: mapToCreditCard(data),\n        });\n    }\n\n    return omitNil(payload);\n}\n"]}