{"version":3,"sources":["../../../src/payment/offsite-mappers/map-to-payload.js"],"names":["mapToPayload","data","authToken","order","paymentMethod","payload","amount","grandTotal","integerAmount","bc_auth_token","currency","gateway","notify_url","callbackUrl","order_id","orderId","page_title","document","title","payment_method_id","reference_id","return_url","payment","returnUrl"],"mappings":";;;;;kBAcwBA,Y;;AAdxB;;;;AACA;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;;;;;AAKe,SAASA,YAAT,CAAsBC,IAAtB,EAA4B;AAAA,QAC/BC,SAD+B,GACeD,IADf,CAC/BC,SAD+B;AAAA,sBACeD,IADf,CACpBE,KADoB;AAAA,QACpBA,KADoB,+BACZ,EADY;AAAA,8BACeF,IADf,CACRG,aADQ;AAAA,QACRA,aADQ,uCACQ,EADR;;;AAGvC,QAAMC,UAAU,4BACZ;AACIC,gBAAQH,MAAMI,UAAN,GAAmBJ,MAAMI,UAAN,CAAiBC,aAApC,GAAoD,IADhE;AAEIC,uBAAeP,SAFnB;AAGIQ,kBAAUP,MAAMO,QAHpB;AAIIC,iBAASP,cAAcO,OAJ3B;AAKIC,oBAAYT,MAAMU,WALtB;AAMIC,kBAAU,qBAASX,MAAMY,OAAf,CANd;AAOIC,oBAAYC,SAASC,KAPzB;AAQIC,2BAAmB,4BAAQf,aAAR,CARvB;AASIgB,sBAAc,qBAASjB,MAAMY,OAAf,CATlB;AAUIM,oBAAYlB,MAAMmB,OAAN,GAAgBnB,MAAMmB,OAAN,CAAcC,SAA9B,GAA0C;AAV1D,KADY,EAaZ,mCAAoBtB,IAApB,CAbY,EAcZ,6BAAcA,IAAd,CAdY,EAeZ,yBAAUA,IAAV,CAfY,EAgBZ,oCAAqBA,IAArB,CAhBY,EAiBZ,0BAAWA,IAAX,CAjBY,CAAhB;;AAoBA,WAAO,oBAAQI,OAAR,CAAP;AACH","file":"map-to-payload.js","sourcesContent":["import objectAssign from 'object-assign';\nimport { omitNil, toString } from '../../common/utils';\nimport { mapToId } from '../../payment-method';\nimport mapToBillingAddress from './map-to-billing-address';\nimport mapToCustomer from './map-to-customer';\nimport mapToMeta from './map-to-meta';\nimport mapToShippingAddress from './map-to-shipping-address';\nimport mapToStore from './map-to-store';\n\n/**\n * Map to payload\n * @param {PaymentRequestData} data\n * @returns {Object}\n */\nexport default function mapToPayload(data) {\n    const { authToken, order = {}, paymentMethod = {} } = data;\n\n    const payload = objectAssign(\n        {\n            amount: order.grandTotal ? order.grandTotal.integerAmount : null,\n            bc_auth_token: authToken,\n            currency: order.currency,\n            gateway: paymentMethod.gateway,\n            notify_url: order.callbackUrl,\n            order_id: toString(order.orderId),\n            page_title: document.title,\n            payment_method_id: mapToId(paymentMethod),\n            reference_id: toString(order.orderId),\n            return_url: order.payment ? order.payment.returnUrl : null,\n        },\n        mapToBillingAddress(data),\n        mapToCustomer(data),\n        mapToMeta(data),\n        mapToShippingAddress(data),\n        mapToStore(data)\n    );\n\n    return omitNil(payload);\n}\n"]}